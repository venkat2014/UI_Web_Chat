<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My AI Agent</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: #ffffff;
  color: #111827;
  height: 100vh;
}

/* Layout */
.app {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Top bar */
.top-bar {
  height: 56px;
  display: flex;
  align-items: center;
  padding: 0 16px;
  border-bottom: 1px solid #e5e7eb;
  gap: 12px;
}

.menu-btn {
  font-size: 22px;
  background: none;
  border: none;
  cursor: pointer;
}

.app-title {
  font-weight: 600;
}

/* Left panel */
.side-panel {
  position: fixed;
  top: 0;
  left: -260px;
  width: 260px;
  height: 100%;
  background: #ffffff;
  border-right: 1px solid #e5e7eb;
  transition: left 0.25s ease;
  z-index: 1000;
  padding: 16px;
}

.side-panel.open {
  left: 0;
}

.side-panel h3 {
  margin-top: 0;
  font-size: 14px;
  color: #6b7280;
}

.side-panel button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border: 1px solid #d1d5db;
  background: #fff;
  border-radius: 8px;
  text-align: left;
  cursor: pointer;
}

/* Chat */
.chat-container {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.chat-message {
  display: flex;
}

.chat-message.ai { justify-content: flex-start; }
.chat-message.user { justify-content: flex-end; }

.bubble {
  max-width: 75%;
  padding: 12px 14px;
  border-radius: 12px;
  font-size: 14px;
  line-height: 1.4;
}

.ai .bubble {
  background: #f3f4f6;
}

.user .bubble {
  background: #2563eb;
  color: #ffffff;
}

/* Input */
.input-bar {
  display: flex;
  gap: 8px;
  padding: 12px;
  border-top: 1px solid #e5e7eb;
}

textarea {
  flex: 1;
  resize: none;
  border: 1px solid #d1d5db;
  border-radius: 10px;
  padding: 10px;
  font-family: inherit;
  font-size: 14px;
}

.icon-btn {
  border: 1px solid #d1d5db;
  background: #ffffff;
  border-radius: 10px;
  padding: 0 12px;
  cursor: pointer;
}

.icon-btn.primary {
  background: #2563eb;
  color: #ffffff;
  border: none;
}
</style>
</head>

<body>

<!-- Left Panel -->
<div id="sidePanel" class="side-panel">
  <h3>Menu</h3>
  <button onclick="newChat()">‚ûï New Chat</button>
  <button disabled>üïò Chat History</button>
  <button disabled>‚öôÔ∏è Settings</button>
  <button disabled>‚ÑπÔ∏è About</button>
</div>

<div class="app">

  <!-- Header -->
  <header class="top-bar">
    <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
    <div class="app-title">My AI Agent</div>
  </header>

  <!-- Chat -->
  <main class="chat-container" id="chat">
    <div class="chat-message ai">
      <div class="bubble">
        Hello üëã I‚Äôm your AI assistant. How can I help you?
      </div>
    </div>
  </main>

  <!-- Input -->
  <footer class="input-bar">
    <button class="icon-btn">üéôÔ∏è</button>
    <textarea id="input" rows="1" placeholder="Type your message‚Ä¶"></textarea>
    <button class="icon-btn primary" onclick="sendMsg()">‚û§</button>
  </footer>

</div>

<script>
/* =============================
   CONFIG
============================= */
const OPENROUTER_API_KEY = "PASTE_YOUR_OPENROUTER_KEY_HERE";
const MODEL = "mistralai/mistral-7b-instruct";

/* =============================
   UI HELPERS
============================= */
const chat = document.getElementById("chat");
const input = document.getElementById("input");

function toggleMenu() {
  document.getElementById("sidePanel").classList.toggle("open");
}

function newChat() {
  chat.innerHTML = `
    <div class="chat-message ai">
      <div class="bubble">
        New chat started. How can I help you?
      </div>
    </div>`;
  toggleMenu();
}

function addMessage(text, role) {
  const div = document.createElement("div");
  div.className = `chat-message ${role}`;
  div.innerHTML = `<div class="bubble">${text}</div>`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function showTyping() {
  const div = document.createElement("div");
  div.id = "typing";
  div.className = "chat-message ai";
  div.innerHTML = `<div class="bubble">Thinking‚Ä¶</div>`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function removeTyping() {
  const t = document.getElementById("typing");
  if (t) t.remove();
}

/* =============================
   REAL OPENROUTER CALL
============================= */
async function sendMsg() {
  const text = input.value.trim();
  if (!text) return;

  addMessage(text, "user");
  input.value = "";
  showTyping();

  try {
    const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
      method: "POST",
      headers: {
        "Authorization": "Bearer " + OPENROUTER_API_KEY,
        "Content-Type": "application/json",
        "HTTP-Referer": window.location.origin,
        "X-Title": "My AI Agent"
      },
      body: JSON.stringify({
        model: MODEL,
        messages: [
          { role: "system", content: "You are a helpful AI assistant." },
          { role: "user", content: text }
        ],
        temperature: 0.7,
        max_tokens: 800
      })
    });

    const data = await res.json();
    removeTyping();

    if (data.error) {
      addMessage("Error: " + data.error.message, "ai");
      return;
    }

    addMessage(data.choices[0].message.content, "ai");

  } catch (e) {
    removeTyping();
    addMessage("Network error. Please try again.", "ai");
  }
}
</script>

</body>
</html>
